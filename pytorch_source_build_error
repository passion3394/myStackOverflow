when run python setup.py install, the following error occurs:

error: #error ( "You found a build system error: __AVX2__ is defined (via e.g. -mavx2) " "but CAFFE2_PERF_WITH_AVX2 is not defined.")


Solution:
I got the same error, and solved it by replacing #include "caffe2/core/macros.h" with #include "build/caffe2/core/macros.h" in caffe2/core/common.h and caffe2/utils/cblas.h.

caffe2/core/macros.h has no content, it's just a placeholder, the real content , that is, build/caffe2/core/macros.h, will be generated by the cmake script.

I noticed that there is -I. and -I../ in the compile command, so the compiler should find both build/caffe2/core/macros.h and caffe2/core/macros.h for #include "caffe2/core/macros.h". I don't know what will happen if the compiler find two header file with the same name.
